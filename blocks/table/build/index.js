(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,r=window.wp.shortcode;var s=e.n(r);const a=JSON.parse('{"UU":"tablepress/table"}'),l=e=>{let t=Object.entries(e.named).map((([e,t])=>{let r="";return t=t.replace(/“([^”]*)”/g,"$1"),(/\s/.test(t)||""===t)&&(r='"'),t.includes('"')&&(r="'"),`${e}=${r}${t}${r}`})).join(" ");return e.numeric.forEach((e=>{/\s/.test(e)?t+=' "'+e+'"':t+=" "+e})),t},n=e=>{delete e.named.id;let t=l(e);return t=t.replace(/=“([^”]*)”/g,'="$1"'),t=t.replaceAll("&amp;","&").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&lsqb;","[").replaceAll("&rsqb;","]"),t},o=e=>{let r=s().next(tp.table.shortcode,e).shortcode.attrs;r={named:{...r.named},numeric:[...r.numeric]};const l=r.named.id,o=n(r);return(0,t.createBlock)(a.UU,{id:l,parameters:o})},i={from:[{type:"shortcode",tag:tp.table.shortcode,attributes:{id:{type:"string",shortcode:({named:{id:e=""}})=>e},parameters:{type:"string",shortcode:e=>(e={named:{...e.named},numeric:[...e.numeric]},n(e))}}},{type:"enter",regExp:s().regexp(tp.table.shortcode),transform:({content:e})=>o(e)},{type:"block",blocks:["core/shortcode"],transform:({text:e})=>o(e),isMatch:({text:e})=>void 0!==s().next(tp.table.shortcode,e),isMultiBlock:!1}],to:[{type:"block",blocks:["core/shortcode"],transform:({id:e,parameters:r})=>{""!==(r=r.trim())&&(r=(r+=" ").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("[","&lsqb;").replaceAll("]","&rsqb;"));const s=`[${tp.table.shortcode} id=${e} ${r}/]`;return(0,t.createBlock)("core/shortcode",{text:s})}}]},c=window.wp.i18n,p=window.wp.serverSideRender;var d=e.n(p);const b=window.wp.blockEditor,h=window.wp.components,m=window.wp.primitives,u=window.ReactJSXRuntime,x=(0,u.jsxs)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-32 -32 64 64",fill:"#50575e",children:[(0,u.jsx)(m.Path,{d:"M0-25.854h-25.854v51.708h51.708V0H21v21h-42v-42H0Z"}),(0,u.jsx)(m.Path,{d:"M-18-18h10v10h-10zM-18-5h10V5h-10zM-5-5H5V5H-5zM-18 8h10v10h-10zM-5 8H5v10H-5zM8 8h10v10H8zM5-31h6.18v6.18H5zM19-25h6.18v6.18H19zM0-15h3.82v3.82H0zM10-20h3.82v3.82H10zM25-12h3.82v3.82H25zM8-13h10v10H8z"})]}),w=Object.entries(tp.tables).map((([e,t])=>({value:e,label:(0,c.sprintf)((0,c.__)("ID %1$s: “%2$s”","tablepress"),e,t)}))),_=function(){return""!==tp.url&&(0,u.jsx)(h.ExternalLink,{href:tp.url,children:(0,c.__)("Manage your tables.","tablepress")})},v=window.wp.element;let g=null;const j=Object.keys(tp.tables);j.length&&(g={attributes:{id:j[Math.floor(Math.random()*j.length)],parameters:""}});const f=g;(0,t.registerBlockType)(a.UU,{transforms:i,edit:({attributes:e,setAttributes:t})=>{const r=(0,b.useBlockProps)();let n;if(e.id&&tp.tables.hasOwnProperty(e.id))n=(0,u.jsxs)("div",{...r,children:[tp.load_block_preview&&(0,u.jsx)(d(),{block:a.UU,attributes:{id:e.id,parameters:`block_preview=true ${e.parameters}`.trim()},className:"render-wrapper"}),(0,u.jsx)("div",{className:"table-overlay",children:(0,c.sprintf)((0,c.__)("TablePress table %1$s: “%2$s”","tablepress"),e.id,tp.tables[e.id])})]});else{let t=0<w.length?(0,c.__)("Select the TablePress table that you want to embed in the Settings sidebar.","tablepress"):(0,c.__)("There are no TablePress tables on this site yet.","tablepress");e.id&&(t=(0,c.sprintf)((0,c.__)("There is a problem: The TablePress table with the ID “%1$s” could not be found.","tablepress"),e.id)+" "+t),n=(0,u.jsx)("div",{...r,children:(0,u.jsx)(h.Placeholder,{icon:(0,u.jsx)(h.Icon,{icon:x}),label:(0,c.__)("TablePress table","tablepress"),instructions:t,children:(0,u.jsx)(_,{})})})}const o=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(b.InspectorControls,{children:(0,u.jsx)(h.PanelBody,{opened:!0,children:0<w.length?(0,u.jsx)(h.ComboboxControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,c.__)("Table:","tablepress"),help:(0,u.jsxs)(u.Fragment,{children:[(0,c.__)("Select the TablePress table that you want to embed.","tablepress"),""!==tp.url&&" ",(0,u.jsx)(_,{})]}),value:e.id,options:w,onChange:e=>{null!=e||(e=""),t({id:e.replace(/[^0-9a-zA-Z-_]/g,"")})}}):(0,u.jsxs)(u.Fragment,{children:[(0,c.__)("There are no TablePress tables on this site yet.","tablepress"),""!==tp.url&&" ",(0,u.jsx)(_,{})]})})}),e.id&&tp.tables.hasOwnProperty(e.id)&&(0,u.jsx)(b.InspectorAdvancedControls,{children:(0,u.jsx)(h.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,c.__)("Configuration parameters:","tablepress"),help:(0,c.__)("These additional parameters can be used to modify specific table features.","tablepress")+" "+(0,c.__)("See the TablePress Documentation for more information.","tablepress"),value:e.parameters,onChange:e=>{e=(e=s().replace(tp.table.shortcode,e,(({attrs:e})=>(delete(e={named:{...e.named},numeric:[...e.numeric]}).named.id," "+l(e)+" ")))).replace(/=“([^”]*)”/g,'="$1"'),t({parameters:e})},onBlur:e=>{const r=e.target.value.trim();t({parameters:r})}})})]});return(0,u.jsxs)(u.Fragment,{children:[n,o]})},save:({attributes:{id:e="",parameters:t=""}})=>""===e?"":(""!==(t=t.trim())&&(t+=" "),(0,u.jsx)(v.RawHTML,{children:`[${tp.table.shortcode} id=${e} ${t}/]`})),example:f,icon:x})})();