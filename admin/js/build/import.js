(()=>{"use strict";const e=window.wp.i18n,t=e=>"#"===e[0]?document.getElementById(e.slice(1)):document.querySelectorAll(e),l={source:"",type:""},i=t("#tablepress_import-import-form"),o=t("#tables-import-file-upload"),r=t("#tables-import-file-upload-dropzone"),s=t("#tables-import-server"),n=t("#tables-import-existing-table");jSuites.dropdown(n,{autocomplete:!0,placeholder:n.options[0].innerText}),i.addEventListener("change",(()=>{var e,r,a;l.source=document.querySelector("#row-import-source input:checked").value,l.type=document.querySelector("#row-import-type input:checked").value,i.classList.add("no-validation-highlighting"),null==s||s.setCustomValidity(""),n.previousSibling.querySelector(".jdropdown-header").setCustomValidity(""),["file-upload","url","server","form-field"].forEach((e=>{t(`#row-import-source-${e}`).style.display=e===l.source?"table-row":"none",t(`#tables-import-${e}`).required=e===l.source})),t("#tables-import-url").type="url"===l.source?"url":"text";const d="add"===l.type||"file-upload"===l.source&&(1<(null==o||null===(e=o.files)||void 0===e?void 0:e.length)||1===(null==o||null===(r=o.files)||void 0===r?void 0:r.length)&&(null==o||null===(a=o.files)||void 0===a?void 0:a[0].name.endsWith(".zip")));n.disabled=d,n.previousSibling.classList.toggle("disabled",d)})),document.querySelector("#row-import-source input:checked").dispatchEvent(new Event("change",{bubbles:!0})),o.addEventListener("change",(function(t){var l,i;(null==t||null===(l=t.target)||void 0===l||null===(i=l.files)||void 0===i?void 0:i.length)>0?(r.innerHTML=`<span>${(0,e.sprintf)((0,e._n)("You have selected %1$d file:","You have selected %1$d files:",t.target.files.length,"tablepress"),t.target.files.length)}</span>`,[...t.target.files].forEach((e=>{const t=document.createElement("span");t.textContent=e.name,r.appendChild(t)}))):r.innerHTML=`<span>${(0,e.__)("Click to select a file, or drag it here.","tablepress")}</span>`})),o.addEventListener("dragenter",(function(){r.classList.add("dragover")})),o.addEventListener("dragleave",(function(){r.classList.remove("dragover")})),t("#import-submit-button").addEventListener("click",(()=>{var t,r;i.classList.remove("no-validation-highlighting"),"server"===l.source&&s&&s.defaultValue===s.value&&s.setCustomValidity((0,e.__)("You must specify a path to a file on the server.","tablepress")),"replace"!==l.type&&"append"!==l.type||"file-upload"===l.source&&(1!==(null==o||null===(t=o.files)||void 0===t?void 0:t.length)||null!=o&&null!==(r=o.files)&&void 0!==r&&r[0].name.endsWith(".zip"))||""===n.value&&n.previousSibling.querySelector(".jdropdown-header").setCustomValidity((0,e.__)("You must select a table.","tablepress"))}))})();